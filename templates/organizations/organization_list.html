{% extends "organizations/organizations-base.html" %}

{% block src-javascript %}
{{ block.super }}
{% if sao %}
  <script type="text/javascript">
    function archive(oid, stat) {
      $.get("{% url 'organizations.views.archive_org' %}", {"oid" : oid, "status" : stat}, function(data) {
          if(parseInt(data) > -1) {
            $('#' + data).parent().parent().remove();
            $('tr:odd').removeClass('odd').addClass('even');
            $('tr:even').removeClass('even').addClass('odd');
          }
        });
    }

    </script>
{% endif %}
{% endblock %}

{% block content %}
<div class="row-extra-padding">
  <h2 class="lead larger"> here is a list of organizations.</p>
</div>
	<input class="btn btn-primary" type="submit" value="Get Organization List as CSV" onclick="document.location='{% url 'organizations.views.csv_list' %}';"></input>

{% if sao %}
{% if archived %}
<a href="html-list">View Current Organizations</a>
<br>
<br>
{% else %}
<a href="html-list?archived=true">View Archived Organizations</a>
<br>
<br>
{% endif %}
{% endif %}
<div class="table-responsive">
<table class="table table-hover">
  <tr class="table-header">
    <td>
      Name
    </td>
    <td>
      Signator
    </td>
    <td>
      Email
    </td>
  </tr>

  <tbody>
  {% for o in orgs %}
    <tr class="{% cycle even,odd %}" onmouseover="fakeLinkHover(this, true)" 
	onmouseout="fakeLinkHover(this, false)" style="cursor: pointer;">
      <td onclick="javascript:document.location='{{ o.id }}/detail';" >
        {{ o.name }}
      </td>
      <td onclick="javascript:document.location='{{ o.id }}/detail';" >
        {{ o.signator.get_full_name }}
      </td>
      <td onclick="javascript:document.location='{{ o.id }}/detail';" >
        {{ o.email }}
      </td>
      {% if sao %}
	  {% if archived %}
      <td class="button">
        <input type="submit" id="{{ o.id }}" value="De-Archive" onclick="archive({{ o.id }}, false);">
      </td>
	  {% else %}
      <td class="button">
        <input type="submit" id="{{ o.id }}" value="Archive" onclick="archive({{ o.id }}, true);">
      </td>
      {% endif %}
	  {% endif %}
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
